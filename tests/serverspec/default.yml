- hosts: localhost
  roles:
    - ansible-role-resolver
  vars:
    nameservers:
      - 192.168.1.1
      - 192.168.1.2
      - 192.168.1.3
    # XXX ansible_fqdn is generally preferred to ansible_hostname to avoid
    # collision, but ansible_fqdn is generated by socket.getfqdn, which
    # returns different values when DNS servers are not available. as a list
    # of invalid DNS servers are used in the test, socket.getfqdn on OpenBSD
    # returns different value before and after the first play. use
    # ansible_hostname here to pass idempotency_test
    resolver_nameservers: "{{ nameservers | shuffle(seed = ansible_hostname) }}"
    config_map:
      OpenBSD: |
        domain i.trombik.org
        lookup file bind
    resolver_config: "{{ config_map[ansible_os_family] | default('') }}"
